# 1 "backend_js_JsWriter.ml"
(* Generated by reflaxe.ocaml (WIP) *)
(* Haxe type: backend.js.JsWriter *)

let __reflaxe_ocaml__ = ()

type t = { __hx_type : Obj.t; mutable out : StringBuf.t; mutable indent : int; mutable unit : string }

let create = fun indentUnit -> let self = ({ __hx_type = HxType.class_ "backend.js.JsWriter"; out = StringBuf.create (); indent = 0; unit = "" } : t) in (
  ignore ((
    ignore (let __assign_1 = 0 in (
      self.indent <- __assign_1;
      __assign_1
    ));
    ignore (let __assign_2 = StringBuf.create () in (
      self.out <- __assign_2;
      __assign_2
    ));
    let tempRight = ref "" in (
      ignore (if indentUnit == Obj.magic (HxRuntime.hx_null) then let __assign_3 = "  " in (
        tempRight := __assign_3;
        __assign_3
      ) else let __assign_4 = indentUnit in (
        tempRight := __assign_4;
        __assign_4
      ));
      let __assign_5 = !tempRight in (
        self.unit <- __assign_5;
        __assign_5
      )
    )
  ));
  self
)

let __empty = fun () -> ({ __hx_type = HxType.class_ "backend.js.JsWriter"; out = StringBuf.create (); indent = 0; unit = "" } : t)

let pushIndent = fun self () -> ignore (let __recv_6 = self in __recv_6.indent <- HxInt.add (__recv_6.indent) 1)

let popIndent = fun self () -> ignore (if self.indent > 0 then ignore (let __recv_7 = self in __recv_7.indent <- HxInt.sub (__recv_7.indent) 1) else ())

let writeln = fun self (line : string) -> ignore (let _g = ref 0 in let _g1 = self.indent in (
  ignore (while !_g < _g1 do ignore ((
    ignore (let __old_8 = !_g in let __new_9 = HxInt.add __old_8 1 in (
      ignore (_g := __new_9);
      __old_8
    ));
    StringBuf.add (self.out) (Obj.repr (self.unit))
  )) done);
  let tempString = ref "" in (
    ignore (if line == Obj.magic (HxRuntime.hx_null) then let __assign_10 = "" in (
      tempString := __assign_10;
      __assign_10
    ) else let __assign_11 = line in (
      tempString := __assign_11;
      __assign_11
    ));
    ignore (StringBuf.add (self.out) (Obj.repr (!tempString)));
    StringBuf.add (self.out) (Obj.repr "\n")
  )
))

let toString = fun self () -> StringBuf.toString (self.out) ()