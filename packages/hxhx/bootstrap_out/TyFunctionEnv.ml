# 1 "TyFunctionEnv.ml"
(* Generated by reflaxe.ocaml (WIP) *)
(* Haxe type: TyFunctionEnv *)

let __reflaxe_ocaml__ = ()

type t = { __hx_type : Obj.t; mutable name : string; mutable params : TySymbol.t HxArray.t; mutable locals : TySymbol.t HxArray.t; mutable returnType : TyType.t; mutable returnExprType : TyType.t }

let create = fun name2 params2 locals2 returnType2 returnExprType2 -> let self = ({ __hx_type = HxType.class_ "TyFunctionEnv"; name = ""; params = Obj.magic (); locals = Obj.magic (); returnType = Obj.magic (); returnExprType = Obj.magic () } : t) in (
  ignore ((
    ignore (let __assign_1 = name2 in (
      self.name <- __assign_1;
      __assign_1
    ));
    ignore (let __assign_2 = params2 in (
      self.params <- __assign_2;
      __assign_2
    ));
    ignore (let __assign_3 = locals2 in (
      self.locals <- __assign_3;
      __assign_3
    ));
    ignore (let __assign_4 = returnType2 in (
      self.returnType <- __assign_4;
      __assign_4
    ));
    let __assign_5 = returnExprType2 in (
      self.returnExprType <- __assign_5;
      __assign_5
    )
  ));
  self
)

let __empty = fun () -> ({ __hx_type = HxType.class_ "TyFunctionEnv"; name = ""; params = Obj.magic (); locals = Obj.magic (); returnType = Obj.magic (); returnExprType = Obj.magic () } : t)

let getName = fun self () -> self.name

let getParams = fun self () -> self.params

let getLocals = fun self () -> self.locals

let getReturnType = fun self () -> self.returnType

let getReturnExprType = fun self () -> self.returnExprType

let declareLocal = fun self (name2 : string) (ty : TyType.t) -> let sym = TySymbol.create name2 ty in (
  ignore (HxArray.push (self.locals) sym);
  sym
)

let resolveSymbol = fun self (name2 : string) -> try (
  ignore (let _g = ref 0 in let _g1 = self.params in while !_g < HxArray.length _g1 do ignore (let p = HxArray.get _g1 (!_g) in (
    ignore (let __old_6 = !_g in let __new_7 = HxInt.add __old_6 1 in (
      ignore (_g := __new_7);
      __new_7
    ));
    if HxString.equals (TySymbol.getName p ()) name2 then raise (HxRuntime.Hx_return (Obj.repr p)) else ()
  )) done);
  ignore (let _g = ref 0 in let _g1 = self.locals in while !_g < HxArray.length _g1 do ignore (let l = HxArray.get _g1 (!_g) in (
    ignore (let __old_8 = !_g in let __new_9 = HxInt.add __old_8 1 in (
      ignore (_g := __new_9);
      __new_9
    ));
    if HxString.equals (TySymbol.getName l ()) name2 then raise (HxRuntime.Hx_return (Obj.repr l)) else ()
  )) done);
  Obj.magic (HxRuntime.hx_null)
) with
  | HxRuntime.Hx_return __ret_10 -> Obj.obj __ret_10

let resolveLocal = fun self (name2 : string) -> let sym = resolveSymbol self name2 in let tempResult = ref (Obj.magic ()) in (
  ignore (if sym == Obj.magic (HxRuntime.hx_null) then let __assign_11 = TyType.unknown () in (
    tempResult := __assign_11;
    __assign_11
  ) else let __assign_12 = TySymbol.getType sym () in (
    tempResult := __assign_12;
    __assign_12
  ));
  !tempResult
)