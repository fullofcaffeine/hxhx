# 1 "backend_js_JsSwitchPatternLowering.ml"
(* Generated by reflaxe.ocaml (WIP) *)
(* Haxe type: backend.js.JsSwitchPatternLowering *)

let __reflaxe_ocaml__ = ()

type t = { __hx_type : Obj.t }

let create = fun () -> let self = ({ __hx_type = HxType.class_ "backend.js.JsSwitchPatternLowering" } : t) in (
  ignore ();
  self
)

let __empty = fun () -> ({ __hx_type = HxType.class_ "backend.js.JsSwitchPatternLowering" } : t)

let rec lower = fun pattern scrutineeVar -> let tempResult = ref (Obj.magic ()) in (
  ignore (match pattern with
    | HxSwitchPattern.PNull -> let __assign_1 = let __anon_2 = HxAnon.create () in (
      ignore (HxAnon.set __anon_2 "cond" (Obj.repr (HxString.toStdString scrutineeVar ^ " == null")));
      ignore (HxAnon.set __anon_2 "bindName" (Obj.repr (Obj.magic (HxRuntime.hx_null))));
      __anon_2
    ) in (
      tempResult := __assign_1;
      __assign_1
    )
    | HxSwitchPattern.PWildcard -> let __assign_3 = let __anon_4 = HxAnon.create () in (
      ignore (HxAnon.set __anon_4 "cond" (Obj.repr "true"));
      ignore (HxAnon.set __anon_4 "bindName" (Obj.repr (Obj.magic (HxRuntime.hx_null))));
      __anon_4
    ) in (
      tempResult := __assign_3;
      __assign_3
    )
    | HxSwitchPattern.PString _p0 -> let _g = _p0 in let value = _g in let __assign_5 = let __anon_6 = HxAnon.create () in (
      ignore (HxAnon.set __anon_6 "cond" (Obj.repr ((HxString.toStdString scrutineeVar ^ " === ") ^ HxString.toStdString (Backend_js_JsNameMangler.quoteString value))));
      ignore (HxAnon.set __anon_6 "bindName" (Obj.repr (Obj.magic (HxRuntime.hx_null))));
      __anon_6
    ) in (
      tempResult := __assign_5;
      __assign_5
    )
    | HxSwitchPattern.PInt _p0 -> let _g = _p0 in let value = _g in let __assign_7 = let __anon_8 = HxAnon.create () in (
      ignore (HxAnon.set __anon_8 "cond" (Obj.repr ((HxString.toStdString scrutineeVar ^ " === ") ^ HxString.toStdString (string_of_int value))));
      ignore (HxAnon.set __anon_8 "bindName" (Obj.repr (Obj.magic (HxRuntime.hx_null))));
      __anon_8
    ) in (
      tempResult := __assign_7;
      __assign_7
    )
    | HxSwitchPattern.PEnumValue _p0 -> let _g = _p0 in let name = _g in let __assign_9 = let __anon_10 = HxAnon.create () in (
      ignore (HxAnon.set __anon_10 "cond" (Obj.repr ((HxString.toStdString scrutineeVar ^ " === ") ^ HxString.toStdString (Backend_js_JsNameMangler.quoteString name))));
      ignore (HxAnon.set __anon_10 "bindName" (Obj.repr (Obj.magic (HxRuntime.hx_null))));
      __anon_10
    ) in (
      tempResult := __assign_9;
      __assign_9
    )
    | HxSwitchPattern.PBind _p0 -> let _g = _p0 in let name = _g in let __assign_11 = let __anon_12 = HxAnon.create () in (
      ignore (HxAnon.set __anon_12 "cond" (Obj.repr "true"));
      ignore (HxAnon.set __anon_12 "bindName" (Obj.repr name));
      __anon_12
    ) in (
      tempResult := __assign_11;
      __assign_11
    )
    | HxSwitchPattern.POr _p0 -> let _g = _p0 in let patterns = _g in let parts = HxArray.create () in let _g2 = ref 0 in (
      ignore (while !_g2 < HxArray.length patterns do ignore (let p = HxArray.get patterns (!_g2) in (
        ignore (let __old_13 = !_g2 in let __new_14 = HxInt.add __old_13 1 in (
          ignore (_g2 := __new_14);
          __new_14
        ));
        let lowered = lower p scrutineeVar in HxArray.push parts (("(" ^ HxString.toStdString (Obj.obj (HxAnon.get lowered "cond"))) ^ ")")
      )) done);
      let tempString = ref "" in (
        ignore (if HxArray.length parts = 0 then let __assign_15 = "false" in (
          tempString := __assign_15;
          __assign_15
        ) else let __assign_16 = HxArray.join parts " || " (fun x -> x) in (
          tempString := __assign_16;
          __assign_16
        ));
        let __assign_17 = let __anon_18 = HxAnon.create () in (
          ignore (HxAnon.set __anon_18 "cond" (Obj.repr (!tempString)));
          ignore (HxAnon.set __anon_18 "bindName" (Obj.repr (Obj.magic (HxRuntime.hx_null))));
          __anon_18
        ) in (
          tempResult := __assign_17;
          __assign_17
        )
      )
    ));
  !tempResult
)