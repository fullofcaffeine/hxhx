(* Generated by reflaxe.ocaml (WIP) *)
(* Haxe type: StringBuf *)

let __reflaxe_ocaml__ = ()

type t = { __hx_type : Obj.t; mutable b : string }

let create = fun () -> let self = ({ __hx_type = HxType.class_ "StringBuf"; b = "" } : t) in (
  ignore (let __assign_1 = "" in (
    self.b <- __assign_1;
    __assign_1
  ));
  self
)

let get_length = fun self () -> HxString.length (self.b)

let add = fun self x -> ignore (let __recv_2 = self in __recv_2.b <- HxString.toStdString (__recv_2.b) ^ HxString.toStdString (HxRuntime.dynamic_toStdString (Obj.repr x)))

let addChar = fun self c -> ignore (let __recv_3 = self in __recv_3.b <- HxString.toStdString (__recv_3.b) ^ HxString.toStdString (HxString.fromCharCode c))

let addSub = fun self s pos len -> ignore (let tempRight = ref "" in (
  ignore (if len == HxRuntime.hx_null then let __assign_4 = HxString.substr s pos (-1) in (
    tempRight := __assign_4;
    __assign_4
  ) else let __assign_5 = HxString.substr s pos (let __nullable_int_6 = len in if __nullable_int_6 == HxRuntime.hx_null then 0 else Obj.obj __nullable_int_6) in (
    tempRight := __assign_5;
    __assign_5
  ));
  let __recv_7 = self in __recv_7.b <- HxString.toStdString (__recv_7.b) ^ HxString.toStdString (!tempRight)
))

let toString = fun self () -> self.b